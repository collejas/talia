/* Base de estilos del Panel, alineada con la landing */
:root{
  --bg:#0b1020;
  --fg:#eaf2ff;
  --muted:#aeb9d9;
  --primary:#6aa3ff;
  --accent:#7bffdf;
  --surface:#0f1730;
  --surface-alt:#0b132a;
  --border-soft:rgba(255,255,255,.08);
  --border-strong:rgba(255,255,255,.18);
  --btn-bg:#1a223a;
  --btn-border:rgba(255,255,255,.18);
}

body.theme-aurora{
  --bg:#0b1020;
  --fg:#eaf2ff;
  --muted:#aeb9d9;
  --primary:#6aa3ff;
  --accent:#7bffdf;
  --surface:#0f1730;
  --surface-alt:#0b132a;
  --border-soft:rgba(255,255,255,.08);
  --border-strong:rgba(255,255,255,.18);
  --btn-bg:#1a223a;
  --btn-border:rgba(255,255,255,.18);
}

body.theme-ice{
  --bg:#f5f7ff;
  --fg:#1f2937;
  --muted:rgba(31,41,55,.6);
  --primary:#2563eb;
  --accent:#7c3aed;
  --surface:#ffffff;
  --surface-alt:#eef2ff;
  --border-soft:rgba(148,163,184,.28);
  --border-strong:rgba(148,163,184,.38);
  --btn-bg:#e0e7ff;
  --btn-border:rgba(99,102,241,.4);
}

body.theme-void{
  --bg:#050505;
  --fg:#f4f4f5;
  --muted:rgba(212,212,216,.7);
  --primary:#10b981;
  --accent:#0ea5e9;
  --surface:#111114;
  --surface-alt:#0a0a0f;
  --border-soft:rgba(148,163,184,.16);
  --border-strong:rgba(148,163,184,.28);
  --btn-bg:#1f1f26;
  --btn-border:rgba(148,163,184,.28);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--fg)}
a{color:inherit;text-decoration:none}

.container{max-width:1160px;margin:0 auto;padding:0 20px}
.nav{position:sticky;top:0;backdrop-filter:saturate(180%) blur(8px);background:rgba(11,16,32,.5);border-bottom:1px solid var(--border-soft);z-index:10}
.nav-inner{display:flex;align-items:center;justify-content:space-between;height:64px}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.brand-icon{width:34px;height:34px;object-fit:contain}
.brand-text{display:flex;align-items:center;gap:8px;font-weight:700;letter-spacing:.3px;font-size:1.15rem}
.brand-text .logo{display:inline-grid;place-items:center;width:34px;height:34px;border-radius:9px;background:linear-gradient(135deg,var(--primary),#b48cff);color:#fff;font-size:1rem;font-weight:700}
.brand-text-panel{margin-left:4px;font-weight:500;font-size:1rem;color:var(--muted)}
.logo{display:inline-grid;place-items:center;width:34px;height:34px;border-radius:9px;background:linear-gradient(135deg,var(--primary),#b48cff);color:#fff;font-weight:700}
.menu{display:flex;gap:12px;align-items:center}
.theme-switcher{display:flex;align-items:center;gap:10px}
.theme-switcher select{padding:6px 12px;border-radius:10px;border:1px solid var(--btn-border);background:var(--surface-alt);color:var(--fg);appearance:none;font-size:13px}
.theme-switcher select:focus{outline:2px solid var(--primary);outline-offset:2px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:10px;border:1px solid transparent;background:var(--btn-bg);color:var(--fg);transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn-outline{background:transparent;border-color:var(--btn-border)}
.menu > a.is-active{background:rgba(106,163,255,.12);border-color:rgba(106,163,255,.35);border-radius:10px;color:var(--primary);font-weight:600}
.muted{color:var(--muted)}

body.theme-ice .nav{background:rgba(255,255,255,.85);border-bottom:1px solid var(--border-soft)}
body.theme-void .nav{background:rgba(8,8,12,.75);border-bottom:1px solid var(--border-soft)}

/* Utilidades b√°sicas */
.w100{width:100%}

.map-card{margin-top:20px;display:flex;flex-direction:column;gap:16px}
.map-card-header{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:space-between;gap:16px}
.map-card-title{margin:0;font-size:20px;font-weight:700}
.map-card-subtitle{margin:4px 0 0;font-size:13px;max-width:520px}
.map-card-controls{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.map-card-controls .btn{padding:8px 12px;font-size:13px}
.map-card-controls select{min-width:150px}
.map-control{display:flex;flex-direction:column;font-size:12px;gap:4px;color:var(--muted)}
.map-summary{font-size:13px}
.map-summary strong{color:var(--fg)}
.map-card .btn[disabled]{opacity:.5;pointer-events:none}

#leads-map-wrapper{position:relative;border-radius:12px;overflow:hidden;border:1px solid var(--border-soft);background:var(--surface-alt)}
.map-container{min-height:420px}
.map-container.leaflet-container{height:100%;width:100%}
.map-loading,.map-error{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:24px;font-size:15px;background:rgba(11,16,32,.65);color:var(--fg);z-index:5}
.map-error{background:rgba(176,34,78,.15);color:#ffccd5}
.map-legend{position:absolute;bottom:16px;right:16px;background:rgba(11,16,32,.82);border-radius:10px;padding:10px 12px;font-size:12px;display:flex;flex-direction:column;gap:6px;border:1px solid rgba(255,255,255,.08);min-width:140px}
.map-legend[hidden]{display:none}
.map-legend-title{font-weight:600;font-size:12px}
.map-legend-scale{display:grid;grid-template-columns:repeat(auto-fit,minmax(60px,1fr));gap:8px}
.map-legend-item{display:flex;align-items:center;gap:6px}
.map-legend-swatch{width:14px;height:14px;border-radius:4px;border:1px solid rgba(255,255,255,.4)}
.map-legend-range{font-size:11px}

@media (max-width:768px){
  .kpi-grid{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}
  .map-card-controls{width:100%;justify-content:flex-start}
  #leads-map-wrapper{border-radius:10px}
  .map-container{min-height:320px}
}

.embudo-card-section{margin-top:20px;display:flex;flex-direction:column;gap:16px}
.embudo-header{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:space-between;gap:16px}
.embudo-controls{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.embudo-controls .btn{padding:8px 12px;font-size:13px}
.embudo-summary{display:flex;flex-wrap:wrap;align-items:center;gap:12px;font-size:13px}
.embudo-board{display:flex;gap:14px;overflow-x:auto;padding-bottom:6px;margin-top:4px}
.embudo-board::-webkit-scrollbar{height:6px}
.embudo-board::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:4px}
.embudo-column{min-width:240px;max-width:260px;background:var(--surface-alt);border:1px solid var(--border-soft);border-radius:12px;display:flex;flex-direction:column}
.embudo-column-header{padding:14px 16px;border-bottom:1px solid var(--border-soft)}
.embudo-column-title{margin:0;font-size:15px;font-weight:600}
.embudo-column-count{font-size:12px;color:var(--muted)}
.embudo-column-body{padding:12px;display:flex;flex-direction:column;gap:10px;max-height:480px;overflow-y:auto}
.embudo-card-item{background:var(--surface);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:12px;display:flex;flex-direction:column;gap:8px;box-shadow:0 1px 2px rgba(0,0,0,.2)}
.embudo-card-title{display:flex;justify-content:space-between;align-items:flex-start;gap:8px;font-weight:600;font-size:14px}
.embudo-card-meta{display:flex;flex-wrap:wrap;gap:6px;font-size:12px;color:var(--muted)}
.embudo-score{font-size:11px;padding:2px 6px;border-radius:8px;background:rgba(122,163,255,.2);color:var(--primary);font-weight:600}
.embudo-pill{display:inline-flex;align-items:center;padding:2px 8px;border-radius:20px;background:rgba(122,163,255,.15);color:var(--primary);font-size:11px}
.embudo-next{font-size:12px;margin:0;color:var(--fg)}
.embudo-loading,.embudo-error,.embudo-empty{padding:14px;border-radius:10px;border:1px solid var(--border-soft)}
.embudo-loading{background:rgba(122,163,255,.1);color:var(--primary)}
.embudo-error{background:rgba(176,34,78,.18);color:#ffd1dc}
.embudo-empty{background:rgba(255,255,255,.06);color:var(--muted)}
.embudo-hidden{display:none!important}

@media (max-width:768px){
  .embudo-column{min-width:220px}
}
